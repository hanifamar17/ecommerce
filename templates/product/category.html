{% extends "base.html" %}

{% block title %}Kategori{% endblock %}

{% block content %}
{% load widget_tweaks %}
<style>
    /* Header style: gray text, not bold */
    table.dataTable thead th {
        background-color: #f9fafb;
        /* Tailwind's gray-50 */
        color: #6b7280 !important;
        /* Tailwind's gray-500 */
        font-weight: 400 !important;
        /* Normal, not bold */
        font-size: 0.875rem !important;
        /* text-sm */
        padding: 6px 8px !important;
        white-space: nowrap;
    }

    /* Table body cell style */
    table.dataTable tbody td {
        font-size: 0.875rem !important;
        /* text-sm */
        padding: 4px 8px !important;
        white-space: nowrap;
        vertical-align: middle;
    }

    /* Full width and auto layout */
    table.dataTable {
        width: 100% !important;
        table-layout: auto;
    }

    /* Align details icon center if responsive collapse is used */
    table.dataTable.dtr-inline.collapsed>tbody>tr>td:first-child:before {
        top: 50%;
        transform: translateY(-50%);
    }

    .currency {
        font-family: 'Courier New', monospace;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .animate-spin {
        animation: spin 1s linear infinite;
    }
</style>
<div class="w-full text-gray-800 p-8 bg-gray-50 rounded-md">
    <!-- Header -->
    <div class="flex items-center justify-between border-b border-gray-200 mb-4">
        <div class="text-center md:text-left space-y-2 mb-4">
            <h1 class="text-xl font-semibold text-gray-800">Kategori Produk</h1>
            <p class="text-gray-600 text-sm">Menampilkan informasi kategori produk untuk dimasukkan ke katalog produk
            </p>
        </div>
        <div class="mb-4 flex justify-end space-x-2">
            <a href="{% url 'add_category' %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md 
      text-white bg-blue-600 hover:bg-blue-700 focus:outline-none 
      focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 no-print cursor-pointer">
                <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                        clip-rule="evenodd"></path>
                </svg>
                Kategori
            </a>
        </div>
    </div>


    <div class="overflow-x-auto w-full py-4">
        <table id="records-table" class="table-auto w-full text-sm whitespace-nowrap divide-y divide-gray-200">
            <thead class="bg-gray-100">
                <tr class="bg-gray-50">
                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Nama</th>
                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Deskripsi</th>
                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Aksi</th>
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for category in categories %}
                <tr class="odd:bg-white even:bg-gray-50 hover:bg-gray-100 text-sm">
                    <td class="px-3 py-2 capitalize whitespace-nowrap">{{ category.name }}</td>
                    <td class="px-3 py-2 capitalize whitespace-nowrap">{{ category.description }}</td>
                    <td class="px-3 py-2">
                        <div class="flex items-center space-x-2">
                            <a href="{% url 'edit_category' category.id %}" class="edit-btn hover:text-blue-800 active:text-blue-900
                   font-medium text-sm
                   transition-all duration-200 ease-in-out
                   hover:underline hover:underline-offset-2 cursor-pointer">
                                Edit
                            </a>
                            <!-- Separator -->
                            <span class="text-gray-300">|</span>
                            <a href="{% url 'delete_category' category.id %}" class="delete-record cursor-pointer
                                            text-red-600 hover:text-red-800 active:text-red-900
                                            font-medium text-sm
                                            py-1
                                            transition-all duration-200 ease-in-out
                                            hover:underline hover:underline-offset-2">
                                Hapus</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

<!--Swal mixin-->
<script>
    // Mixin untuk toast notifikasi
    const Toast = Swal.mixin({
        toast: true,
        position: "top-end",
        showConfirmButton: false,
        timer: 2500,
        timerProgressBar: true,
        didOpen: (toast) => {
            toast.addEventListener("mouseenter", Swal.stopTimer);
            toast.addEventListener("mouseleave", Swal.resumeTimer);
        }
    });
</script>

<!--datatables-->
<script>
    $(document).ready(function () {
        $('#records-table').DataTable({
            responsive: {
                details: { type: 'column', target: 'tr' }
            },
            paging: false,           // Disable pagination
            lengthChange: false,     // Hide "Show entries"
            language: {
                search: "Search:",
                info: "Showing _TOTAL_ entries",
                zeroRecords: "No records found"
            },
            columnDefs: [
                { targets: '_all', className: "px-2 py-1" }
            ],
            dom:
                // Only search bar on top, and info on bottom
                '<"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-4 mb-4"f>' +
                'rt' +
                '<"text-sm text-gray-600 mt-4"i>',
            initComplete: function () {
                $('.dataTables_filter label').addClass('text-sm font-medium text-gray-700');
                $('.dataTables_filter input').addClass('ml-2 px-3 py-2 border border-gray-300 rounded text-sm');
                $('.dataTables_info').addClass('text-sm text-gray-600 mt-2');
            },
        });

        // Fitur: Cek semua
        $('#select-all').on('click', function () {
            $('.row-checkbox').prop('checked', this.checked);
        });
    });
</script>





{% endblock %}