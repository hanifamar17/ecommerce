{% extends "store/base.html" %}

{% block title %}wkwk cloth{% endblock %}

{% block content %}
{% load widget_tweaks %}
<div class="w-full">
    <div class="p-6 mt-6 sm:10 lg:p-16">
        <!-- Breadcrumb -->
        <nav class="my-6">
            <ol class="flex items-center space-x-2 text-sm text-gray-600">
                <li><a href="{% url 'landing_page' %}" class="hover:text-gray-900">Beranda</a></li>
                <li><span class="mx-2">/</span></li>
                <li><a href="{% url 'all_products' %}" class="hover:text-gray-900">Semua Produk</a></li>
                <li><span class="mx-2">/</span></li>
                <li class="text-gray-900">Detail Produk</li>
            </ol>
        </nav>

        <!-- Page Header -->
        <div class="flex flex-col md:flex-row md:items-center justify-between mb-8">
            <div class="flex flex-row justify-between w-full">
            <div>
                <h1 class="text-2xl font-light text-gray-900 mb-1">Semua Produk</h1>
                <p class="text-sm text-gray-600">Temukan koleksi fashion terbaik kami</p>
            </div>

            <a href="{% url 'cart_view' %}" class="relative self-center cursor-pointer text-slate-800 text-sm font-medium hover:text-blue-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                         stroke-width="1.5" stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 
                                 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 
                                 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 
                                 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 
                                 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 
                                 1-1.5 0 .75.75 0 0 1 1.5 0Z"/>
                    </svg>
                
                    {% if cart_count > 0 %}
                    <span id="cart-count" class="absolute -top-1 -right-1 bg-gray-900 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full">
                        {{ cart_count }}
                    </span>
                    {% else %}
                    <span id="cart-count" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full"></span>
                    {% endif %}
                </a>
            </div>
        </div>

        <!-- Product Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 mb-12">
            <!-- Product Image -->
            <div class="relative">
                <div class="aspect-square overflow-hidden">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}"
                        class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
                </div>
                <!-- Image thumbnails (optional) -->
                <div class="mt-4 grid grid-cols-4 gap-2">
                    <!-- Add more thumbnails if available -->
                </div>
            </div>

            <!-- Product Info -->
            <div class="flex flex-col">
                <div>
                    <h1 class="text-xl font-light text-gray-900 mb-2">{{ product.name }}</h1>
                    <p class="text-sm text-gray-500 mb-4">Kategori: {{ product.category.name }}</p>

                    <!-- Rating Summary -->
                    <div class="flex items-center gap-3 mb-6">
                        <div class="flex text-yellow-400">
                            <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-5 h-5 text-gray-300" viewBox="0 0 20 20">
                                <path fill="currentColor"
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                        </div>
                        <span class="text-sm text-gray-600">4.0 (25 ulasan)</span>
                    </div>

                    <!-- Price -->
                    <div class="mb-6">
                        <p class="text-3xl font-light text-gray-900">Rp{{ product.price|floatformat:0}}</p>
                    </div>

                    <!-- Stock Status -->
                    <div class="flex items-center gap-2 mb-6">
                        <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                        <span class="text-sm text-gray-600">{{ product.stock }} Stok Tersedia</span>
                    </div>


                    <!-- Action Buttons -->
                    <div class="space-y-3 mb-6">
                        <form action="{% url 'add_to_cart' product.id %}" method="post" class="add-to-cart-form">
                            {% csrf_token %}
                            <button type="submit"
                                class="w-full bg-gray-900 hover:bg-gray-800 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="size-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 
                                 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 
                                 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 
                                 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 
                                 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 
                                 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                </svg>
                                Tambah ke Keranjang
                            </button>
                        </form>

                        <a href="{% url 'all_products' %}"
                            class="block text-center mt-3 text-gray-600 hover:text-gray-800 text-sm">
                            Lanjutkan Belanja
                        </a>
                    </div>

                    <!-- Quick Info -->
                    <div class="border-t pt-6">
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4">
                                    </path>
                                </svg>
                                <span class="text-gray-600">Gratis ongkir untuk pembelian diatas Rp 100.000</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
                                </svg>
                                <span class="text-gray-600">Kebijakan pengembalian 7 hari</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z">
                                    </path>
                                </svg>
                                <span class="text-gray-600">Produk 100% original</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Product Images -->
        <div class="mb-8">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
                <!-- Loop untuk foto tambahan -->
                <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="Product view 1"
                        class="w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer">
                </div>
                <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="Product view 2"
                        class="w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer">
                </div>
                <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="Product view 3"
                        class="w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer">
                </div>
                <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="Product view 4"
                        class="w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer">
                </div>
            </div>
        </div>

        <!-- Description and Reviews Section -->
        <div class="flex flex-col md:flex-row gap-6 lg:gap-8 items-start">
            <!-- Product Description -->
            <div class="md:w-1/2 bg-white rounded-lg p-8">
                <div class="border-b border-gray-400 mb-6">
                    <h2 class="text-md md:text-lg font-medium text-gray-900 mb-2">Deskripsi Produk
                    </h2>
                </div>
                <div class="text-sm md:text-md prose prose-sm text-gray-600 max-w-none">
                    <p>{{ product.description }}</p>
                </div>
            </div>

            <!-- Reviews Section -->
            <div class="md:w-1/2 bg-white rounded-lg p-8">
                <div class="flex items-center justify-between border-b border-gray-400 mb-6">
                    <h2 class="text-xl font-medium text-gray-900 mb-2">Ulasan Pelanggan</h2>
                    <button class="text-sm text-gray-600 hover:text-gray-900 mb-2">Tulis Ulasan</button>
                </div>

                <!-- Rating Summary -->
                <div class="flex items-center gap-4 pb-6 border-b border-gray-200">
                    <div class="text-center">
                        <p class="text-3xl font-light text-gray-900">4.0</p>
                        <div class="flex text-yellow-400 mt-1">
                            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                                <path
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                            <svg class="w-4 h-4 text-gray-300" viewBox="0 0 20 20">
                                <path fill="currentColor"
                                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                            </svg>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">25 ulasan</p>
                    </div>
                    <div class="flex-1 space-y-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-gray-600 w-3">5</span>
                            <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full" style="width: 60%"></div>
                            </div>
                            <span class="text-xs text-gray-600 w-8">60%</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-gray-600 w-3">4</span>
                            <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full" style="width: 20%"></div>
                            </div>
                            <span class="text-xs text-gray-600 w-8">20%</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-gray-600 w-3">3</span>
                            <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full" style="width: 15%"></div>
                            </div>
                            <span class="text-xs text-gray-600 w-8">15%</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-gray-600 w-3">2</span>
                            <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full" style="width: 5%"></div>
                            </div>
                            <span class="text-xs text-gray-600 w-8">5%</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-gray-600 w-3">1</span>
                            <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full" style="width: 0%"></div>
                            </div>
                            <span class="text-xs text-gray-600 w-8">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Individual Reviews -->
                <div class="space-y-4 mt-6 max-h-96 overflow-y-auto">
                    <!-- Review 1 -->
                    <div class="pb-4 border-b last:border-0">
                        <div class="flex items-start gap-3">
                            <div
                                class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium text-gray-600">
                                A
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-1">
                                    <p class="text-sm font-medium text-gray-900">Ahmad S.</p>
                                    <p class="text-xs text-gray-500">2 hari yang lalu</p>
                                </div>
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="flex text-yellow-400">
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                    </div>
                                    <span class="text-xs text-gray-500">• Pembelian terverifikasi</span>
                                </div>
                                <p class="text-xs text-gray-500 mb-2">Varian: {{ product.name }} - Hitam</p>
                                <p class="text-sm text-gray-600">Kualitas produk sangat baik, sesuai dengan deskripsi.
                                    Pengiriman cepat dan packaging rapi.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Review 2 -->
                    <div class="pb-4 border-b last:border-0">
                        <div class="flex items-start gap-3">
                            <div
                                class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium text-gray-600">
                                S
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-1">
                                    <p class="text-sm font-medium text-gray-900">Siti R.</p>
                                    <p class="text-xs text-gray-500">1 minggu yang lalu</p>
                                </div>
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="flex text-yellow-400">
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 text-gray-300" viewBox="0 0 20 20">
                                            <path fill="currentColor"
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                    </div>
                                    <span class="text-xs text-gray-500">• Pembelian terverifikasi</span>
                                </div>
                                <p class="text-xs text-gray-500 mb-2">Varian: {{ product.name }} - Putih</p>
                                <p class="text-sm text-gray-600">Barang bagus, tapi ukurannya sedikit lebih kecil dari
                                    yang saya perkirakan. Overall puas.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Review 3 -->
                    <div class="pb-4 border-b last:border-0">
                        <div class="flex items-start gap-3">
                            <div
                                class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm font-medium text-gray-600">
                                B
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-1">
                                    <p class="text-sm font-medium text-gray-900">Budi P.</p>
                                    <p class="text-xs text-gray-500">2 minggu yang lalu</p>
                                </div>
                                <div class="flex items-center gap-2 mb-2">
                                    <div class="flex text-yellow-400">
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                            <path
                                                d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
                                        </svg>
                                    </div>
                                    <span class="text-xs text-gray-500">• Pembelian terverifikasi</span>
                                </div>
                                <p class="text-xs text-gray-500 mb-2">Varian: {{ product.name }} - Abu-abu</p>
                                <p class="text-sm text-gray-600">Mantap! Kualitas premium dengan harga yang worth it.
                                    Recommended!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Container Toast -->
    <div id="toast-container" class="fixed top-5 right-5 z-50 space-y-2 overflow-hidden"></div>
</div>

<!-- toast add to cart-->
<script>
    //ad to cart & cart count update
    document.querySelectorAll(".add-to-cart-form").forEach(form => {
        form.addEventListener("submit", async function (e) {
            e.preventDefault();
            const formData = new FormData(form);

            const response = await fetch(form.action, {
                method: "POST",
                body: formData,
                headers: { "X-Requested-With": "XMLHttpRequest" }
            });

            const data = await response.json();
            if (data.status === "success") {
                showToast("success", data.message);

                // 🔹 Update cart badge
                const cartBadge = document.getElementById("cart-count");
                if (data.cart_count > 0) {
                    cartBadge.textContent = data.cart_count;
                    cartBadge.classList.remove("hidden");
                } else {
                    cartBadge.classList.add("hidden");
                }

                setTimeout(() => {
                    window.location.reload();
                }, 1200);

            } else {
                showToast("error", data.message);
            }
        });
    });

    // Helper function buat bikin toast
    function showToast(type, message) {
        const container = document.getElementById("toast-container");

        // buat element toast
        const toast = document.createElement("div");
        toast.className = `flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-sm transition-all duration-500 ease-in-out transform translate-x-full opacity-0`;
        toast.role = "alert";

        const icon = type === "success"
            ? `<div class="inline-flex items-center justify-center shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/></svg>
           </div>`
            : `<div class="inline-flex items-center justify-center shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"/></svg>
           </div>`;

        toast.innerHTML = `
        ${icon}
        <div class="ms-3 text-sm font-normal">${message}</div>
        <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100">
            <svg class="w-3 h-3" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/></svg>
        </button>
    `;

        // tombol close
        toast.querySelector("button").addEventListener("click", () => {
            hideToast(toast);
        });

        container.appendChild(toast);

        // animasi masuk
        setTimeout(() => {
            toast.classList.remove("translate-x-full", "opacity-0");
            toast.classList.add("translate-x-0", "opacity-100");
        }, 50);

        // auto hide
        setTimeout(() => {
            hideToast(toast);
        }, 2500);
    }

    function hideToast(toast) {
        toast.classList.remove("translate-x-0", "opacity-100");
        toast.classList.add("translate-x-full", "opacity-0");
        setTimeout(() => toast.remove(), 600);
    }
</script>
{% endblock %}